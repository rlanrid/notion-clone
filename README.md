# NextJSë¡œ Notion í´ë¡  ì‚¬ì´íŠ¸ ë§Œë“¤ê¸°

## ğŸ”§ì´ˆê¸°ì„¸íŒ…   
`npx create-next-app@latest`   
`npx shadcn-ui init`   
`npm i @blocknote/core`   
`npm i @blocknote/react`   
`npm i @clerk/clerk-react`   
`npm i @edgestore/react`   
`npm i @edgestore/server`   
`npm i @radix-ui`   
`npm i cmdk`   
`npm i convex`   
`npm i emoji-picker-react`   
`npm i lucide-react`   
`npm i sonner`   
`npm i tailwind-merge`   
`npm i tailwindcss-animate`   
`npm i usehooks-ts`   
`npm i zod`   
`npm i zustand`   

## ğŸ§¾ê°œë… ì •ë¦¬   
- convex   
ConvexëŠ” í˜„ëŒ€ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” ë°±ì—”ë“œ í”Œë«í¼ì…ë‹ˆë‹¤. ì£¼ë¡œ JavaScriptì™€ TypeScriptë¡œ ì‘ì„±ëœ   
ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ë©°, ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…í„°, ê°„í¸í•œ ë°ì´í„° ê´€ë¦¬, ì‹¤ì‹œê°„ ê¸°ëŠ¥, TypeScript ì§€ì› ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.   

- shadcn   
Shadcnì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) êµ¬ì„± ìš”ì†Œë¥¼ ì œê³µí•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ì£¼ë¡œ Reactì™€ í•¨ê»˜ ì‚¬ìš©ë˜ë©°,   
ì‚¬ìš©ìì—ê²Œ ë¹ ë¥´ê³  ì•„ë¦„ë‹¤ìš´ UIë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜, ë””ìì¸ ì‹œìŠ¤í…œ, ë°˜ì‘í˜• ë””ìì¸ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•¨ê³¼ ë™ì‹œì—   
ê¸°ë³¸ ìŠ¤íƒ€ì¼ê³¼ ê¸°ëŠ¥ì„ ì‚¬ìš©ìì˜ ì •ì˜ì— ë”°ë¼ ì‰½ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆê¸° ë–„ë¬¸ì—, ê°œë°œìëŠ” ìì‹ ì˜ ë¸Œëœë“œì™€ ìš”êµ¬ì— ë§ëŠ” UIë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   

- zustand   
ZustandëŠ” React ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìƒíƒœ ê´€ë¦¬ë¥¼ ê°„í¸í•˜ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ê²½ëŸ‰ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ZustandëŠ” "ìƒíƒœ"ì™€ "ì‘ì—…"ì„ ê°„ë‹¨í•˜ê²Œ   
ì •ì˜ í•  ìˆ˜ìˆëŠ” APIë¥¼ ì œê³µí•˜ì—¬, ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ ë¡œì§ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.   

- clerk   
ClerkëŠ” ê°œë°œìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©ì ì¸ì¦ ë° ê´€ë¦¬ ê¸°ëŠ¥ì„ ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì£¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ë©°,   
ì‚¬ìš©ì ê´€ë¦¬, ì„¸ì…˜ ê´€ë¦¬, ë³´ì•ˆ, í”„ë¡ íŠ¸ì—”ë“œ ë° ë°±ì—”ë“œ í†µí•©, ê°„í¸í•œ ì¸ì¦(êµ¬ê¸€, í˜ì´ìŠ¤ë¶ ë“±)ì„ ì œê³µí•©ë‹ˆë‹¤.   

- lucid-react   
Lucid-reactëŠ” React ê¸°ë°˜ì˜ UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ê¹”ë”í•˜ê³  í˜„ëŒ€ì ì¸ ë””ìì¸ì˜ UI ìš”ì†Œë“¤ì„ ì œê³µí•©ë‹ˆë‹¤. ì£¼ë¡œ ë°ì´í„° ì‹œê°í™”, ëŒ€ì‹œë³´ë“œ, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤   
êµ¬ì„± ìš”ì†Œë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.   

- useMutation   
useMutationì€ Reactì˜ í›… ì¤‘ í•˜ë‚˜ë¡œ, ì„œë²„ì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê±°ë‚˜ ë³€ê²½í•˜ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.   
ì¼ë°˜ì ìœ¼ë¡œ GraphQLê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ë°ì´í„° ìƒí˜¸ì‘ìš©ì„ ì‰½ê²Œ í•´ì¤ë‹ˆë‹¤.  

- Edge store   
Edgestoreì€ í´ë¼ìš°ë“œ ê¸°ë°˜ì˜ ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.   


## ğŸ”ì£¼ìš” ê¸°ëŠ¥   
[íšŒì›ê°€ì… ë° ë¡œê·¸ì¸]   

Clerkë¥¼ ì‚¬ìš©í•˜ì—¬ íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.   

<details>
  <summary>
  View Code
  </summary>

  ```js
  import { SignInButton, SignOutButton, useAuth, UserButton } from "@clerk/clerk-react";

  <SignInButton mode="modal">
    <Button variant="ghost" size="sm">
      Login
    </Button>
  </SignInButton>
  <SignInButton mode="modal">
    <Button size="sm">
      Get Zotion free
    </Button>
  </SignInButton>
  ```
</details>   

</br>

[ë…¸íŠ¸ ìƒì„±]   

useMutation í›…ì—ì„œ ê°€ì ¸ì˜¨ create í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ìƒˆë¡œìš´ ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.   
ë¬¸ì„œ ìƒì„±ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ìƒˆë¡œìš´ ë¬¸ì„œ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ í•©ë‹ˆë‹¤.   

<details>
  <summary>
  View Code
  </summary>   
  
  ```js
  const onCreate = () => {
    const promise = create({ title: "Untitled" })
      .then((documentId) => router.push(`/documents/${documentId}`))

    toast.promise(promise, {
      loading: "Creating a new note...",
      success: "New note created!",
      error: "Failed to create a new note"
    });
  };

  <h2 className="text-lg font-medium">
    Welcome to {user?.firstName}&apos;s Zotion
  </h2>
  <Button onClick={onCreate}>
    <PlusCircle className="h-4 w-4 mr-2" />
    Create a note
  </Button>
  ```
</details>

</br>

[ì»¤ë²„ ì´ë¯¸ì§€ ì¶”ê°€ ê¸°ëŠ¥]   

Edgestore ì €ì¥ì†Œë¥¼ ì´ìš©í•´ ì»¤ë²„ ì´ë¯¸ì§€ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.   


<details>
  <summary>
  View Code
  </summary>   
  
  ```js
  const useCoverImage = create<CoverImageStore>((set) => ({
    url: undefined,
    isOpen: false,
    onOpen: () => set({ isOpen: true, url: undefined }),
    onClose: () => set({ isOpen: false, url: undefined }),
    onReplace: (url: string) => set({ isOpen: true, url })
  }));        

  const coverImage = useCoverImage();

  <Button
    onClick={coverImage.onOpen}
    className="text-muted-foreground text-xs"
    variant="outline"
    size="sm"
  >
    <ImageIcon className="h-4 w-4 mr-2" />
    Add cover
  </Button>
  ```
</details>   

</br>   

[ë…¸íŠ¸ ë¸”ëŸ­]   

Noteblock ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ í…ìŠ¤íŠ¸ ê¸°ëŠ¥ì„ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„   

<details>
  <summary>
  View Code
  </summary>   
  
  ```js
  (@/components/editor.tsx)

  "use client";

  import { useTheme } from "next-themes";
  import {
    BlockNoteEditor,
    PartialBlock
  } from "@blocknote/core";
  import {
    BlockNoteView,
    useBlockNote,
  } from "@blocknote/react";
  import "@blocknote/core/style.css";

  import { useEdgeStore } from "@/lib/edgestore";

  interface EditorProps {
    onChange: (value: string) => void;
    initialContent?: string;
    editable?: boolean;
  };

  export const Editor = ({
    onChange,
    initialContent,
    editable
  }: EditorProps) => {
    const { resolvedTheme } = useTheme();
    const { edgestore } = useEdgeStore();

    const handleUpload = async (file: File) => {
      const response = await edgestore.publicFiles.upload({
        file
      });

      return response.url;
    }

    const editor: BlockNoteEditor = useBlockNote({
      editable,
      initialContent:
        initialContent
          ? JSON.parse(initialContent) as PartialBlock[]
          : undefined,
      onEditorContentChange: (editor) => {
        onChange(JSON.stringify(editor.topLevelBlocks, null, 2));
      },
      uploadFile: handleUpload,
    })

    return (
      <div>
        <BlockNoteView
          editor={editor}
          theme={resolvedTheme === "dark" ? "dark" : "light"}
        />
      </div>
    )
  }

  export default Editor;
  ```   

  ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ì¡°í•´ ì†ì‰½ê²Œ êµ¬í˜„ ê°€ëŠ¥í•©ë‹ˆë‹¤.   
</details>   

[Publish ê¸°ëŠ¥]   

<details>
  <summary>
  View Code
  </summary>   
  
  ```js
  <Publish initialData={document} />   

  const onPublish = () => {
    setIsSubmitting(true);

    const promise = update({
      id: initialData._id,
      isPublished: true,
    })
      .finally(() => setIsSubmitting(false));

    toast.promise(promise, {
      loading: "Publishing...",
      success: "Note published",
      error: "Failed to publish note.",
    });
  };

  <Button
    size="sm"
    className="w-full text-xs"
    disabled={isSubmitting}
    onClick={onUnpublish}
  >
    Unpublish
  </Button>
  ```
</details>   

## ğŸ˜‹íŠ¸ëŸ¬ë¸”ìŠˆíŒ…   

<details>
  <summary>
  View Code
  </summary>   
  
  ```js
  `[Error: UNKNOWN: unknown error, o
  pen 'C:\Users\[user]\Documents\notio
  n-clone\.next\static\chunks\app\(
  main)\layout.js'] {
    errno: -4094,
    code: 'UNKNOWN',
    syscall: 'open',
  s\\notion-clone\\.next\\static\\c
  hunks\\app\\(main)\\layout.js'   
  }`
  ```

- ë¬¸ì œ ì›ì¸   
ìš´ì˜ì²´ì œ ë¬¸ì œ, ìºì‹œ ë¬¸ì œ   

- ë¬¸ì œ í•´ê²°   
1. í”„ë¡œì íŠ¸ì˜ ë…¸ë“œjs í”„ë¡œì„¸ìŠ¤ë¥¼ ëª¨ë‘ ì¢…ë£Œ   
2. vscodeë¥¼ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰    
3. .next í´ë” ì‚­ì œ   
4. `npm cache clear --force` ì‹¤í–‰
5. vscodeë¥¼ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰   
6. `npm run dev` ì‹¤í–‰   

</details>   

<details>
  <summary>
  View Code
  </summary>   
  
  ```js
  `EdgeStoreError: Failed to parse response. Make sure the api is correctly configured at http://localhost:3000/api/edgestore/init`  
  ```   

  - ë¬¸ì œ ì›ì¸
  ìš´ì˜ì²´ì œ ë¬¸ì œ   

  - ë¬¸ì œ í•´ê²°   
  ìš´ì˜ì²´ì œ ì¬ì„¤ì¹˜   
</details>

ì›ì¸ ë° í•´ê²°ë°©ë²•: ë²„ì „ì„ 0.1.4ë¡œ ë°”ê¾¸ë©´ í•´ê²°

## ğŸ“ì‚¬ì´íŠ¸   
ìƒíƒœ ê´€ë¦¬ - [convex](https://www.convex.dev/)   
ë¡œê·¸ì¸ - [clerk](https://clerk.com/)   
ë°°í¬ - [vercel](https://vercel.com/)   
ì°¸ê³  ì‚¬ì´íŠ¸ - [Fullstack Notion Clone: Next.js 13, React, Convex, Tailwind | Full Course 2023](https://www.youtube.com/watch?v=0OaDyjB9Ib8)   

## ğŸ“˜ìŠ¤íƒ   
<div>
  <a href="#"><img alt="Next.js" src="https://img.shields.io/badge/Next.js-000000?style=flat&logo=Next.js&logoColor=white"></a>
  <a href="#"><img alt="Tailwind CSS" src="https://img.shields.io/badge/Tailwind CSS-06B6D4?logo=Tailwind CSS&logoColor=white"></a>
  <a href="#"><img alt="TypeScript" src="https://img.shields.io/badge/TypeScript-3178C6?logo=TypeScript&logoColor=white"></a>
  <a href="#"><img alt="Clerk" src="https://img.shields.io/badge/Clerk-6C47FF?logo=Clerk&logoColor=white"></a>
  <a href="#"><img alt="Vercel" src="https://img.shields.io/badge/Vercel-000000?logo=Vercel&logoColor=white"></a>
  <a href="#"><img alt="Radix UI" src="https://img.shields.io/badge/Radix UI-161618?logo=Radix UI&logoColor=white"></a>
</div>
